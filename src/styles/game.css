/* Mobile Background (portrait orientation only) */
@media screen and (orientation: portrait) {
  body {
    background-image: url('/bg.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
}

/* Анимация появления карточек */
@keyframes cardDeal {
  0% {
    opacity: 0;
    transform: translateY(-20px) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Base Card Styles */
.game-card {
  position: relative;
  cursor: pointer;
  border-radius: 2vmin;
  overflow: hidden;
  width: 100%;
  height: 100%;
  min-height: 0;
  user-select: none;
  touch-action: none;
  -webkit-tap-highlight-color: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  transform-style: preserve-3d;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: background-color 0.3s ease-in-out;

  /* Оптимизация рендеринга */
  content-visibility: auto;
  contain: layout style paint;

  /* Анимация появления */
  animation: cardDeal 0.3s ease-out backwards;
}

/* Background Image Animation */
.game-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 2vmin;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
  z-index: 1;
}

.card-content {
  width: calc(100% - 3vmin);
  height: calc(100% - 3vmin);
  border: 0.4vmin solid #2d231926;
  border-radius: 2vmin;
  background: transparent;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.25rem;
  pointer-events: none;
  z-index: 10;
}

.card-word {
  font-weight: bold;
  text-align: center;
  line-height: 1.2;
  font-size: 3vmin;
  z-index: 20;
  position: relative;
  padding: 1vmin;
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  pointer-events: none;
  color: white;
}

/* Color Overlay */
.game-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 2vmin;
  z-index: 5;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

/* Card Flip Animation */
.card-flipped {
  transform: rotateY(180deg);
  transition: transform 1s ease-in-out;
}

.card-flipped .card-content {
  opacity: 0;
  transition: opacity 0.1s ease-in-out 0.4s;
}

/* Glass Effect for Unrevealed Cards */
.card-unrevealed .card-content::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 5;
  border-radius: 2vmin;
  background-image: 
    linear-gradient(-45deg, transparent 0%, transparent calc(12% - 0.6vmin), rgba(255, 255, 255, 0.216) calc(12% - 0.6vmin), rgba(255, 255, 255, 0.216) calc(12% + 0.6vmin), transparent calc(12% + 0.6vmin), transparent 100%),
    linear-gradient(-45deg, transparent 0%, transparent calc(40% - 1.4vmin), rgba(255, 255, 255, 0.216) calc(40% - 1.4vmin), rgba(255, 255, 255, 0.216) calc(40% + 1.4vmin), transparent calc(40% + 1.4vmin), transparent 100%),
    linear-gradient(-45deg, transparent 0%, transparent calc(70% - 0.4vmin), rgba(255, 255, 255, 0.216) calc(70% - 0.4vmin), rgba(255, 255, 255, 0.216) calc(70% + 0.4vmin), transparent calc(70% + 0.4vmin), transparent 100%),
    linear-gradient(-45deg, transparent 0%, transparent calc(85% - 0.9vmin), rgba(255, 255, 255, 0.216) calc(85% - 0.9vmin), rgba(255, 255, 255, 0.216) calc(85% + 0.9vmin), transparent calc(85% + 0.9vmin), transparent 100%);
  background-position: -35% 0, -15% 0, -40% 0, -20% 0;
}

/* Card Color Variants */
.card-unrevealed {
  background-color: #E4D6C5;
}

.card-unrevealed .card-word {
  color: #39241C;
}

.card-blue {
  background-color: #2563eb;
}

.card-blue::after {
  background-color: rgba(37, 99, 235, 0.6);
  opacity: 1;
}

.card-red {
  background-color: #dc2626;
}

.card-red::after {
  background-color: rgba(220, 38, 38, 0.6);
  opacity: 1;
}

.card-black {
  background-color: #111827;
}

.card-black::after {
  background-color: rgba(17, 24, 39, 0.6);
  opacity: 1;
}

.card-neutral {
  background-color: #d1d5db;
}

.card-neutral::after {
  background-color: rgba(209, 213, 219, 0.6);
  opacity: 1;
}

.card-neutral .card-word {
  color: #111827;
}

/* Private Game Message - fadeInUp animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Hint button styles */
.hint-button {
  transition: all 0.3s ease;
  font-size: 1.5rem;
}

.hint-button.hint-blue {
  border-color: #2563eb !important;
  color: #2563eb !important;
}

.hint-button.hint-red {
  border-color: #dc2626 !important;
  color: #dc2626 !important;
}

.hint-button.glowing {
  animation: glow-pulse 2s ease-in-out infinite;
  box-shadow: 0 0 10px currentColor;
}

@keyframes glow-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

/* Рубашки для карточек */
/* Изображения загружаются только когда карточка раскрывается (не блокируют начальный рендер) */

/* Синие рубашки (1-20) */
.card-back-blue-1:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-1.webp'); }
.card-back-blue-2:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-2.webp'); }
.card-back-blue-3:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-3.webp'); }
.card-back-blue-4:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-4.webp'); }
.card-back-blue-5:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-5.webp'); }
.card-back-blue-6:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-6.webp'); }
.card-back-blue-7:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-7.webp'); }
.card-back-blue-8:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-8.webp'); }
.card-back-blue-9:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-9.webp'); }
.card-back-blue-10:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-10.webp'); }
.card-back-blue-11:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-11.webp'); }
.card-back-blue-12:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-12.webp'); }
.card-back-blue-13:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-13.webp'); }
.card-back-blue-14:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-14.webp'); }
.card-back-blue-15:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-15.webp'); }
.card-back-blue-16:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-16.webp'); }
.card-back-blue-17:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-17.webp'); }
.card-back-blue-18:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-18.webp'); }
.card-back-blue-19:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-19.webp'); }
.card-back-blue-20:not(.card-unrevealed)::before { background-image: url('/images/card-blue-back-20.webp'); }

/* Красные рубашки (1-20) */
.card-back-red-1:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-1.webp'); }
.card-back-red-2:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-2.webp'); }
.card-back-red-3:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-3.webp'); }
.card-back-red-4:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-4.webp'); }
.card-back-red-5:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-5.webp'); }
.card-back-red-6:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-6.webp'); }
.card-back-red-7:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-7.webp'); }
.card-back-red-8:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-8.webp'); }
.card-back-red-9:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-9.webp'); }
.card-back-red-10:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-10.webp'); }
.card-back-red-11:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-11.webp'); }
.card-back-red-12:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-12.webp'); }
.card-back-red-13:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-13.webp'); }
.card-back-red-14:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-14.webp'); }
.card-back-red-15:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-15.webp'); }
.card-back-red-16:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-16.webp'); }
.card-back-red-17:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-17.webp'); }
.card-back-red-18:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-18.webp'); }
.card-back-red-19:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-19.webp'); }
.card-back-red-20:not(.card-unrevealed)::before { background-image: url('/images/card-red-back-20.webp'); }

/* Нейтральные рубашки (1-20) */
.card-back-neutral-1:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-1.webp'); }
.card-back-neutral-2:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-2.webp'); }
.card-back-neutral-3:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-3.webp'); }
.card-back-neutral-4:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-4.webp'); }
.card-back-neutral-5:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-5.webp'); }
.card-back-neutral-6:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-6.webp'); }
.card-back-neutral-7:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-7.webp'); }
.card-back-neutral-8:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-8.webp'); }
.card-back-neutral-9:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-9.webp'); }
.card-back-neutral-10:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-10.webp'); }
.card-back-neutral-11:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-11.webp'); }
.card-back-neutral-12:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-12.webp'); }
.card-back-neutral-13:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-13.webp'); }
.card-back-neutral-14:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-14.webp'); }
.card-back-neutral-15:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-15.webp'); }
.card-back-neutral-16:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-16.webp'); }
.card-back-neutral-17:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-17.webp'); }
.card-back-neutral-18:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-18.webp'); }
.card-back-neutral-19:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-19.webp'); }
.card-back-neutral-20:not(.card-unrevealed)::before { background-image: url('/images/card-neutral-back-20.webp'); }

/* Черные рубашки (1-10) */
.card-back-black-1:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-1.webp'); }
.card-back-black-2:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-2.webp'); }
.card-back-black-3:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-3.webp'); }
.card-back-black-4:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-4.webp'); }
.card-back-black-5:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-5.webp'); }
.card-back-black-6:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-6.webp'); }
.card-back-black-7:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-7.webp'); }
.card-back-black-8:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-8.webp'); }
.card-back-black-9:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-9.webp'); }
.card-back-black-10:not(.card-unrevealed)::before { background-image: url('/images/card-black-back-10.webp'); }

:not(.card-unrevealed)[class*="card-back-"]:not(.card-unrevealed)::before {
  opacity: 1;
}